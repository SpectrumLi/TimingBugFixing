--------  PATCH DETAILS  --------

In the LearnerHandler.java

---              leader.processAck(this.sid, qp.getZxid(), sock.getLocalSocketAddress());
+++              DFix_CheckRollback();            leader.processAck(this.sid, qp.getZxid(), sock.getLocalSocketAddress());

In the Leader.java

+++    public Semaphore se_dfix = new Semaphore(0);

---              outstandingProposals.put(newLeaderProposal.packet.getZxid(), newLeaderProposal);
+++              outstandingProposals.put(newLeaderProposal.packet.getZxid(), newLeaderProposal); DFix_Set();


--------  IMPL  DETAILS  --------

In the LearnerHandler.java

DFix_CheckRollback():
leader.se_dfix.tryAcquire(1,7,java.util.concurrent.TimeUnit.SECONDS);

In the Leader.java

DFix_Set():
se_dfix.release(9999);


--------  CLONE DETAILS  --------
In the QuorumPeer.java

---                          leader.lead();
+++                          leader.lead_dfix();

