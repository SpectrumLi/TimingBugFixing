--------  PATCH DETAILS  --------

In the LearnerHandler.java

---              leader.processAck(this.sid, qp.getZxid(), sock.getLocalSocketAddress());
+++             if (DFix_RollCallStack()) DFix_RollDestination(); else             leader.processAck(this.sid, qp.getZxid(), sock.getLocalSocketAddress());


In the Leader.java

---              outstandingProposals.put(newLeaderProposal.packet.getZxid(), newLeaderProposal);
+++              outstandingProposals.put(newLeaderProposal.packet.getZxid(), newLeaderProposal); DFix.Set(outstandingProposals);


---          if (outstandingProposals.size() == 0) {
+++         if (DFix.CheckCallStack()) {if (!DFix.Wait(outstandingProposals)) throw new Exception ("DFIX EXCEPTION "); }        if (outstandingProposals.size() == 0) {

--------  IMPL  DETAILS  --------

In the LearnerHandler.java

DFix_RollDestination():
  int i = 0;
  while(true){ try{
  if (i>100) break; 
 i++;
            leader.processAck(this.sid, qp.getZxid(), sock.getLocalSocketAddress());break;
}catch( Exception e){}}
if (i > 100)             leader.processAck(this.sid, qp.getZxid(), sock.getLocalSocketAddress());


