--- ClientServiceDelegate.java	2019-03-21 11:05:11.134366698 -0500
+++ ../patch/ClientServiceDelegate.java	2019-03-21 23:34:41.928803907 -0500
@@ -286,7 +286,13 @@
     while (true) {
       try {
 	MRClientProtocol dfix_proxy = getProxy();
-        return methodOb.invoke(dfix_proxy, args);
+	while(DFix.ShouldLoop(this)) { 
+	    try{         
+		return methodOb.invoke(dfix_proxy, args);
+	    }catch(Exception e_e){ 
+		if(DFix.Timeout(this)) throw e_e;
+	    }
+	}
       } catch (YarnRemoteException yre) {
         LOG.warn("Exception thrown by remote end.", yre);
         throw yre;
--- MRClientService.java	2019-03-21 11:05:11.134366698 -0500
+++ ../patch/MRClientService.java	2019-03-21 23:33:16.722390972 -0500
@@ -321,7 +321,7 @@
       appContext.getEventHandler().handle( new TaskAttemptDiagnosticsUpdateEvent(taskAttemptId, message));
 
       appContext.getEventHandler().handle(new TaskAttemptEvent(taskAttemptId, TaskAttemptEventType.TA_KILL));
-
+      DFix.EventWait(this);
 
       KillTaskAttemptResponse response = 
         recordFactory.newRecordInstance(KillTaskAttemptResponse.class);
--- TaskAttemptImpl.java	2019-03-21 11:05:11.138366810 -0500
+++ ../patch/TaskAttemptImpl.java	2019-03-21 23:32:51.473675826 -0500
@@ -923,7 +923,9 @@
     try {
       final TaskAttemptState oldState = getState();
       try {
+	if (DFix_CheckDrop(this,event)) return;
         stateMachine.doTransition(event.getType(), event);
+	DFix.Signal(this,event);
       } catch (InvalidStateTransitonException e) {
 //        if (event.getType().toString().equals("TA_DIAGNOSTICS_UPDATE")){
 //            eventHandler.handle(event);
