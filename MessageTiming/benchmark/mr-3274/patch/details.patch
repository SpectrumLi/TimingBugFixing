--- MRClientProtocolPBServiceImpl.java	2019-03-21 10:57:56.742089070 -0500
+++ ../patch/MRClientProtocolPBServiceImpl.java	2019-03-21 23:28:49.658822641 -0500
@@ -214,7 +214,14 @@
     KillTaskAttemptRequest request = new KillTaskAttemptRequestPBImpl(proto);
     try {
       KillTaskAttemptResponse response = null;
-      response = real.killTaskAttempt(request);
+      while(DFix.ShouldLoop(this)){ 
+	  try{       
+	       response = real.killTaskAttempt(request); 
+	       break;
+	  }catch(Exception e_e){ 
+	       if(DFix.Timeout(this)) throw e_e;
+	  }
+      }
       return ((KillTaskAttemptResponsePBImpl)response).getProto();
     } catch (YarnRemoteException e) {
       throw new ServiceException(e);
--- MRClientService.java	2019-03-21 10:57:56.746089184 -0500
+++ ../patch/MRClientService.java	2019-03-21 23:27:09.979995001 -0500
@@ -344,6 +344,7 @@
       verifyAndGetAttempt(taskAttemptId, true);
       appContext.getEventHandler().handle(new TaskAttemptDiagnosticsUpdateEvent(taskAttemptId, message));
       appContext.getEventHandler().handle(new TaskAttemptEvent(taskAttemptId, TaskAttemptEventType.TA_KILL));
+      DFix.EventWait(this);
 
       KillTaskAttemptResponse response = 
         recordFactory.newRecordInstance(KillTaskAttemptResponse.class);
--- TaskAttemptListenerImpl.java	2019-03-21 10:57:56.750089297 -0500
+++ ../patch/TaskAttemptListenerImpl.java	2019-03-21 23:26:16.730483617 -0500
@@ -417,6 +417,7 @@
     WrappedJvmID wJvmID = new WrappedJvmID(jvmId.getJobId(), jvmId.isMap,
         jvmId.getId());
     org.apache.hadoop.mapred.Task task = jvmIDToAttemptMap.get(wJvmID);
+    DFix.Signal(jvmIDToAttemptMap,wJvmID);
     if (task != null) { //there may be lag in the attempt getting added here
       LOG.info("JVM with ID: " + jvmId + " given task: " + task.getTaskID());
       JvmTask jvmTask = new JvmTask(task, false);
